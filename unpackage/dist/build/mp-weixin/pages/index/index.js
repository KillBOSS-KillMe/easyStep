(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"1e1c":function(t,n,e){"use strict";(function(t){e("f62a"),e("921b");o(e("66fd"));var n=o(e("8d89"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},2723:function(t,n,e){"use strict";var o,a=function(){var t=this,n=t.$createElement;t._self._c},u=[];e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return u})),e.d(n,"a",(function(){return o}))},"3d05":function(t,n,e){},"481e":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=a(e("45d0"));function a(t){return t&&t.__esModule?t:{default:t}}var u=new o.default,i={data:function(){return{options:{},title:"Hello",authorizationButton:null,userInfo:{},userInfoAll:{},weRunData:{calorie:"0",lastDayStep:0,todayStep:0,bean:0}}},onLoad:function(t){var n=this;n.options=t,n._onLoad()},onShow:function(){var n=this;t.getSetting({success:function(t){t.authSetting["scope.userInfo"]&&(n.authorizationButton=!1,n.$store.commit("updateAuthorizationButtonData",!1))},fail:function(){console.log("获取授权信息授权失败")}})},methods:{_onLoad:function(t){var n=this;n.userInfo=n.$store.state.userInfo,n.wx_login((function(){n.getUserInfo((function(){"member"==n.userInfo.type?n.getRunData((function(){n.runExchangeBeans((function(){t&&t()}))})):n.promptOpenVip()}))}))},exchangeBeans:function(t){var n=this;n.runExchangeBeans((function(){n.getRunData((function(){t&&t()}))}))},wx_login:function(n){var e=this;e.authorizationButton=e.$store.state.authorizationButton,t.login({provider:"weixin",success:function(o){var a=o.code;t.getUserInfo({provider:"weixin",success:function(t){e.userInfoAll=t,e.$store.commit("updateUserInfo",e.userInfo),e.$store.commit("updateAuthorizationButtonData",!1),u.login({code:a,share_id:e.options.id,headimgurl:t.userInfo.avatarUrl,nickname:t.userInfo.nickName,sex:t.userInfo.gender},(function(t){"ok"==t.status_code&&(u.set_storage("token",t.access_token),u.set_storage("token_type",t.token_type)),n&&n()}))}})}})},getUserInfo:function(t){var n=this;u.getUserInfo({},(function(e){if("ok"==e.status_code){var o=n.$store.state.userInfo;n.userInfo=Object.assign(o,e.data),n.$store.commit("updateUserInfo",n.userInfo),n.$store.commit("updataSettingsInfo",e.settings)}t&&t()}))},getRunData:function(t){var n=this;wx.getWeRunData({success:function(e){var o=n;u.getRunData({iv:e.iv,encryptedData:e.encryptedData,signature:o.userInfoAll.signature,rawData:o.userInfoAll.rawData},(function(n){"ok"==n.status_code&&(o.weRunData=n.data),t&&t()}))}})},runExchangeBeans:function(t){var n=this;u.exchangeBeans({},(function(t){u.show_tips(t.message),"ok"==t.status_code&&(n.weRunData.bean=t.bean)}))},promptOpenVip:function(n){t.showModal({title:"系统提示",content:"系统检测到用户未开通会员，是否开通会员",success:function(t){t.confirm?u.navigate_to("/pages/vip/vip"):t.cancel&&console.log("用户点击取消")}})}},onPullDownRefresh:function(){var n=this;n.page=1,n._onLoad((function(){t.stopPullDownRefresh()}))},onShareAppMessage:function(){var t={title:"",path:"pages/index/index?".concat(this.userInfo.id),imageUrl:""};return u.onShareAppMessage(t)}};n.default=i}).call(this,e("543d")["default"])},"8d89":function(t,n,e){"use strict";e.r(n);var o=e("2723"),a=e("c5a6");for(var u in a)"default"!==u&&function(t){e.d(n,t,(function(){return a[t]}))}(u);e("e77a");var i,s=e("f0c5"),r=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);n["default"]=r.exports},c5a6:function(t,n,e){"use strict";e.r(n);var o=e("481e"),a=e.n(o);for(var u in o)"default"!==u&&function(t){e.d(n,t,(function(){return o[t]}))}(u);n["default"]=a.a},e77a:function(t,n,e){"use strict";var o=e("3d05"),a=e.n(o);a.a}},[["1e1c","common/runtime","common/vendor"]]]);